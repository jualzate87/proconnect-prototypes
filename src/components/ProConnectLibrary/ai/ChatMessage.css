/* ── ChatMessage ── */

.pc-chat-msg {
  display: flex;
  gap: var(--pc-space-2, 8px);
  max-width: 100%;
}

.pc-chat-msg--user {
  flex-direction: row-reverse;
}

.pc-chat-msg__avatar {
  flex-shrink: 0;
  margin-top: 2px;
}

.pc-chat-msg__body {
  max-width: 85%;
  min-width: 0;
}

/* Bubble */
.pc-chat-msg__bubble {
  padding: var(--pc-space-3, 12px);
  border-radius: var(--pc-radius-xl, 12px);
  font-size: var(--pc-font-size-sm, 13px);
  line-height: var(--pc-line-height-normal, 1.5);
  word-wrap: break-word;
}

.pc-chat-msg--assistant .pc-chat-msg__bubble {
  background-color: var(--pc-color-ai-bubble-assistant, #F4F5F8);
  color: var(--pc-color-ai-text-assistant, #282828);
  border-top-left-radius: var(--pc-radius-sm, 4px);
}

.pc-chat-msg--user .pc-chat-msg__bubble {
  background-color: var(--pc-color-ai-bubble-user, #0077C5);
  color: var(--pc-color-ai-text-user, #FFFFFF);
  border-top-right-radius: var(--pc-radius-sm, 4px);
}

/* Text */
.pc-chat-msg__text {
  margin: 0;
}

.pc-chat-msg__text + .pc-chat-msg__text {
  margin-top: var(--pc-space-2, 8px);
}

/* Code block */
.pc-chat-msg__code-block {
  margin: var(--pc-space-2, 8px) 0;
  border-radius: var(--pc-radius-md, 6px);
  overflow: hidden;
  border: 1px solid var(--pc-color-border-secondary, #ECEEF1);
}

.pc-chat-msg__code-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--pc-space-1, 4px) var(--pc-space-3, 12px);
  background-color: var(--pc-color-bg-tertiary, #ECEEF1);
}

.pc-chat-msg__code-lang {
  font-size: var(--pc-font-size-xs, 11px);
  color: var(--pc-color-text-tertiary, #8C8C8C);
  text-transform: uppercase;
}

.pc-chat-msg__code-copy {
  background: none;
  border: none;
  padding: 2px;
  color: var(--pc-color-text-tertiary, #8C8C8C);
  cursor: pointer;
  display: flex;
  align-items: center;
}

.pc-chat-msg__code-copy:hover {
  color: var(--pc-color-text-primary, #282828);
}

.pc-chat-msg__code {
  padding: var(--pc-space-3, 12px);
  background-color: var(--pc-color-surface-sunken, #ECEEF1);
  font-family: var(--pc-font-family-mono);
  font-size: var(--pc-font-size-xs, 11px);
  line-height: 1.6;
  margin: 0;
  overflow-x: auto;
}

/* List */
.pc-chat-msg__list {
  margin: var(--pc-space-2, 8px) 0;
  padding-left: var(--pc-space-5, 20px);
}

.pc-chat-msg__list li {
  margin-bottom: var(--pc-space-1, 4px);
}

/* Action button (inline) */
.pc-chat-msg__action-btn {
  display: inline-flex;
  align-items: center;
  gap: var(--pc-space-1, 4px);
  margin-top: var(--pc-space-2, 8px);
  padding: var(--pc-space-1, 4px) var(--pc-space-3, 12px);
  background-color: var(--pc-color-surface-primary, #FFFFFF);
  border: 1px solid var(--pc-color-border-primary, #D4D7DC);
  border-radius: var(--pc-radius-md, 6px);
  font-size: var(--pc-font-size-sm, 13px);
  font-family: inherit;
  color: var(--pc-color-primary, #0077C5);
  cursor: pointer;
  transition: all var(--pc-transition-fast, 100ms ease-in-out);
}

.pc-chat-msg__action-btn:hover {
  background-color: var(--pc-color-primary-light, #E6F3FA);
  border-color: var(--pc-color-primary, #0077C5);
}

/* Meta */
.pc-chat-msg__meta {
  display: flex;
  align-items: center;
  gap: var(--pc-space-2, 8px);
  margin-top: var(--pc-space-1, 4px);
  padding: 0 var(--pc-space-1, 4px);
}

.pc-chat-msg__time {
  font-size: var(--pc-font-size-xs, 11px);
  color: var(--pc-color-text-tertiary, #8C8C8C);
}

.pc-chat-msg__error {
  font-size: var(--pc-font-size-xs, 11px);
  color: var(--pc-color-error, #D32F2F);
}

/* Actions (feedback, copy, etc.) */
.pc-chat-msg__actions {
  display: flex;
  align-items: center;
  gap: var(--pc-space-1, 4px);
  margin-top: var(--pc-space-1, 4px);
  opacity: 0;
  transition: opacity var(--pc-transition-fast, 100ms ease-in-out);
}

.pc-chat-msg:hover .pc-chat-msg__actions {
  opacity: 1;
}

.pc-chat-msg__action {
  background: none;
  border: none;
  padding: var(--pc-space-1, 4px);
  color: var(--pc-color-text-tertiary, #8C8C8C);
  cursor: pointer;
  border-radius: var(--pc-radius-sm, 4px);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--pc-transition-fast, 100ms ease-in-out);
}

.pc-chat-msg__action:hover {
  background-color: var(--pc-color-bg-hover, #F4F5F8);
  color: var(--pc-color-text-primary, #282828);
}

/* Retry */
.pc-chat-msg__retry {
  background: none;
  border: none;
  color: var(--pc-color-primary, #0077C5);
  font-size: var(--pc-font-size-xs, 11px);
  font-family: inherit;
  cursor: pointer;
  margin-top: var(--pc-space-1, 4px);
}

.pc-chat-msg__retry:hover {
  text-decoration: underline;
}
